# Copyright 2026 Google LLC
#
# Licensed under the Apache License, Version 2.0 (the "License");
# you may not use this file except in compliance with the License.
# You may obtain a copy of the License at
#
#      http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.

sources:
    looker-source:
        kind: looker
        base_url: ${LOOKER_BASE_URL}
        client_id: ${LOOKER_CLIENT_ID:}
        client_secret: ${LOOKER_CLIENT_SECRET:}
        verify_ssl: ${LOOKER_VERIFY_SSL:true}
        timeout: 600s
        use_client_oauth: ${LOOKER_USE_CLIENT_OAUTH:false}
        show_hidden_models: ${LOOKER_SHOW_HIDDEN_MODELS:true}
        show_hidden_explores: ${LOOKER_SHOW_HIDDEN_EXPLORES:true}
        show_hidden_fields: ${LOOKER_SHOW_HIDDEN_FIELDS:true}

tools:
    search_permission_sets:
        kind: looker-search-permission-sets
        source: looker-source
        description: |
          This tool searches for permission sets in the Looker instance.
          Permission sets define what actions a user or group can perform.
          The output includes details like the permission set's `id`, `name`, `permissions`, and `all_access`.
          Parameters:
          - name (optional): The name of the permission set.
          - id (optional): The unique id of the permission set.
          - limit (optional): The number of results to return.
          - offset (optional): The number of results to skip before returning.
          Output:
          A JSON array of objects, where each object represents a permission set and contains details
          such as `id`, `name`, `permissions` (list of permission strings) and `all_access` (boolean).

toolsets:
    looker_admin_tools:
        - search_permission_sets